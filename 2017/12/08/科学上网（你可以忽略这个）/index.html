<html>
<head><meta name="generator" content="Hexo 3.8.0">
	
	<title>科学上网（你可以忽略这个）</title>
	<meta name="keywords" content="刘洋,刘洋的blog">

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    
	   <link href="/css/main.css?v=3" rel="stylesheet" type="text/css">
    
        <script src="/js/util.js"></script>
        <script>
            if(isMobile()) {
                loadjscssfile('../css/mobile.css', 'css');
            } else {
                loadjscssfile('../css/desktop.css', 'css');
            }
        </script> 
    

    <link rel="alternate" type="application/atom+xml" href="/atom.xml" title="Atom feed">

    
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=3">
    
    

</head>

<body>


<h2 class="title">科学上网（你可以忽略这个）</h2>
<!---
<div style="text-align:center;margin-top: -10px;">
<div class="article-category">
发表于2017年12月8日


    <a class="article-category-link" href="/categories/学习/">学习</a>



 </div>
--->


<ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#服务器端搭建"><span class="toc-text">服务器端搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#客户端搭建"><span class="toc-text">客户端搭建</span></a></li></ol>
<h3 id="服务器端搭建"><a href="#服务器端搭建" class="headerlink" title="服务器端搭建"></a>服务器端搭建</h3><p>终端<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install shadowsocks</span><br><span class="line"></span><br><span class="line">vim /etc/sysctl.d/local.conf</span><br></pre></td></tr></table></figure></p>
<p>增加<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span> max open files</span><br><span class="line">fs.file-max = 51200</span><br><span class="line"><span class="meta">#</span> max read buffer</span><br><span class="line">net.core.rmem_max = 67108864</span><br><span class="line"><span class="meta">#</span> max write buffer</span><br><span class="line">net.core.wmem_max = 67108864</span><br><span class="line"><span class="meta">#</span> default read buffer</span><br><span class="line">net.core.rmem_default = 65536</span><br><span class="line"><span class="meta">#</span> default write buffer</span><br><span class="line">net.core.wmem_default = 65536</span><br><span class="line"><span class="meta">#</span> max processor input queue</span><br><span class="line">net.core.netdev_max_backlog = 4096</span><br><span class="line"><span class="meta">#</span> max backlog</span><br><span class="line">net.core.somaxconn = 4096</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> resist SYN flood attacks</span><br><span class="line">net.ipv4.tcp_syncookies = 1</span><br><span class="line"><span class="meta">#</span> reuse timewait sockets when safe</span><br><span class="line">net.ipv4.tcp_tw_reuse = 1</span><br><span class="line"><span class="meta">#</span> turn off fast timewait sockets recycling</span><br><span class="line">net.ipv4.tcp_tw_recycle = 0</span><br><span class="line"><span class="meta">#</span> short FIN timeout</span><br><span class="line">net.ipv4.tcp_fin_timeout = 30</span><br><span class="line"><span class="meta">#</span> short keepalive time</span><br><span class="line">net.ipv4.tcp_keepalive_time = 1200</span><br><span class="line"><span class="meta">#</span> outbound port range</span><br><span class="line">net.ipv4.ip_local_port_range = 10000 65000</span><br><span class="line"><span class="meta">#</span> max SYN backlog</span><br><span class="line">net.ipv4.tcp_max_syn_backlog = 4096</span><br><span class="line"><span class="meta">#</span> max timewait sockets held by system simultaneously</span><br><span class="line">net.ipv4.tcp_max_tw_buckets = 5000</span><br><span class="line"><span class="meta">#</span> turn on TCP Fast Open on both client and server side</span><br><span class="line">net.ipv4.tcp_fastopen = 3</span><br><span class="line"><span class="meta">#</span> TCP receive buffer</span><br><span class="line">net.ipv4.tcp_rmem = 4096 87380 67108864</span><br><span class="line"><span class="meta">#</span> TCP write buffer</span><br><span class="line">net.ipv4.tcp_wmem = 4096 65536 67108864</span><br><span class="line"><span class="meta">#</span> turn on path MTU discovery</span><br><span class="line">net.ipv4.tcp_mtu_probing = 1</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> for high-latency network</span><br><span class="line">net.ipv4.tcp_congestion_control = hybla</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span> for low-latency network, use cubic instead</span><br><span class="line"><span class="meta">#</span> net.ipv4.tcp_congestion_control = cubic</span><br></pre></td></tr></table></figure></p>
<p>生效<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sysctl —system</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span>这里如果出现 “sysctl: permission denied on key"</span><br><span class="line">rm -f /sbin/sysctl</span><br><span class="line">ln -s /bin/true /sbin/sysctl</span><br></pre></td></tr></table></figure></p>
<p>新建 <code>vim /root/c.json</code><br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "server":"0.0.0.0",</span><br><span class="line">    "server_port":7788,</span><br><span class="line">    "local_address": "127.0.0.1",</span><br><span class="line">    "local_port":8888,</span><br><span class="line">    "password":"xxxx",</span><br><span class="line">    "timeout":300,</span><br><span class="line">    "method":"aes-256-cfb",</span><br><span class="line">    "fast_open": true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>前台试跑<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssserver -c /root/c.json</span><br></pre></td></tr></table></figure></p>
<p>后台跑和停止<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">ssserver -c /root/c.json -d start</span><br><span class="line">ssserver -c /root/c.json -d stop</span><br></pre></td></tr></table></figure></p>
<p>看看日志<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">tail -f -n 10 /var/log/shadowsocks.log</span><br></pre></td></tr></table></figure></p>
<p>这样， 你就可以访问您的ip:7788 密码：xxxx去合理上网了。记得打开阿里巴巴的安全组！  </p>
<h3 id="客户端搭建"><a href="#客户端搭建" class="headerlink" title="客户端搭建"></a>客户端搭建</h3><p><a href="https://github.com/shadowsocks/shadowsocks-windows/wiki/Shadowsocks-Windows-%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener">请看Windows系统</a><br><a href="https://github.com/shadowsocks/shadowsocks-iOS/wiki/Shadowsocks-for-OSX-%E5%B8%AE%E5%8A%A9" target="_blank" rel="noopener">请看Mac系统/苹果手机</a><br>安卓手机请到<a href="https://github.com/shadowsocks/shadowsocks-android/releases" target="_blank" rel="noopener">这里</a>来下载apk， 随便下载一个安装！<br>Linux客户端请这样<br><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo pip install shadowsocks</span><br><span class="line">sslocal -s 服务器域名或IP -p 7788 -k “密码” -l 1080 -t 600 -m rc4-md5</span><br><span class="line">//下载后填入相关信息即可!</span><br></pre></td></tr></table></figure></p>


<!--<a href="http://yoursite.com/2017/12/08/科学上网（你可以忽略这个）/#disqus_thread" class="article-comment-link">Comments</a>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = ''; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
-->
<div style="display:none">
<script src="http://s4.cnzz.com/stat.php?id=&web_id=" language="JavaScript"></script>script>
</div>






</body>
</html>